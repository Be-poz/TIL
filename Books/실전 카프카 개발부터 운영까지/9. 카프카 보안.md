# 카프카 보안

### 암호화(SSL)

카프카와 카프카 클라이언트 사이의 통신 내용을 중간에 가로채는 데 성공하더라도 내용은 전혀 파악할 수 없도록 토신에는 반드시 암호화를 적용해야 한다. 이런 암호화 통신을 설정하기 위해 일반적으로 SSL을 사용한다.  

<Br/>

### 인증(SASL)

SASL(Simple Authentication and Security Layer)은 인터넷 프로토콜에서 인증과 데이터 보안을 위한 프레임워크로서 카프카에서도 사용된다. 애플리케이션 프로토콜에서 인증 메커니즘을 분리함으로써 모든 애플리케이션에서 사용할 수 있다.  

SASL 메커니즘으로는 SCRAM, GSSAPI, OPLAIN, AUTHBEARER, DIGEST-MD5 등이 있고, 카프카에서는 아래의 4가지 SASL 메커니즘을 지원한다.  

* SASL/GSSAPI: 카프카 0.9 버전 부터 지원했으며, GSSAPI는 커버로스 인증 방식으로 많이 사용되는 인증 방식 중 하나다. 회사 내부에별도의 커버로스 서버가 있는 환경이라면 커버로스 인증 방식을 사용하는 것이 가장 좋다. 커버로스 인증 방식을 적용할 때는 REALM이라는 설정이 필요한데, 이때는 되도록 하나의 렐름으로 모든 애플리케이션을 적용하는 방법을 추천한다. 크로스 렐름 설정으로 인해 클라이언트들의 재인증, 인증 실패 등이 일어나는 경우가 종종 있기 때문이다.  
* SASL/PLAIN: 0.10.0 버전부터 지원했다. 아이디와 비밀번호를 텍스트 형태로 사용하는 방법으로서, 운영 환경보다는 개발 환경에서 테스트 등의 목적으로 활용한다.
* SASL/SCRAM-SHA-256, SASL/SCRAM-SHA-512: 본래의 암호에 해시된 내용을 추가함으로써 암호가 유출되어도 본래 암호를 알 수 없어 안전하게 저장할 수 있다. 별도의 커버로스 서버가 구성되어 있지 않은 환경에서 카프카의 인증을 구성해야 할 때 가장 좋은 방식이다.
* SASL/OAUTHBEARER: 2.0 버전부터 지원했고, OAUTH 방식이다. 카프카에서 제공하는 기능은 매우 한정적이라 개발 환경 정도에만 적용해야한다.  

<br/>

## 권한(ACL)

카프카뿐만 아니라 다른 애플리케이션 또는 방화벽 등에서 권한을 설정하는 대표적인 방법이며, Access Control List의 약자다.  

간단히 CLI로 ACL을 추가하거나 삭제할 수 있으며 모든 ACL 규칙은 주키퍼에 저장된다. ACL은 리소스 타입별로 구체적인 설정이 가능하다. 리소스 타입은 크게 토픽, 그룹, 클러스터, 트랜잭셔널 ID, 위임 토큰으로 나뉜다.

---

