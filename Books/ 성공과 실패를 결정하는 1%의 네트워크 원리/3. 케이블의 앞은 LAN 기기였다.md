# 케이블의 앞은 LAN 기기였다

## 케이블과 리피터, 허브 속을 신호가 흘러간다

### 하나하나의 패킷이 독립된 것으로 동작한다

컴퓨터에서 송신된 패킷은 허브나 라우터라는 중계 장치에 의해 중계되어 목적지를 향해 진행한다. 이때 데이터의 정보를 보지 않고 중계하기 때문에 제어 정보의 내용이 패킷을 운반하는 동작에 영향을 주지 않는다.  

### LAN 케이블은 신호를 약화시키지 않는 것이 핵심이다

이더넷의 신호의 실체는 플러스와 마이너스의 전압이므로 LAN 어댑터의 PHY 회로의 플러스와 마이너스 신호 단자에서 신호가 나온다고 생각해도 된다.  
송출한 신호는 그대로의 모습으로 허브에 도착하는 것이 아니라 허브에 도착할 때는 신호가 약해져 있다. 케이블을 통과하는 사이에 신호의 에너지가 조금씩 떨어지므로 케이블의 길이가 길어질수록 신호가 약해진다. 신호는 단지 약해지기만 하는 것이 아니라 각이 뭉개져 둥글게 된다. 잡음이 없고 조건이 좋은 경우에도 신호가 도착할 때는 이와 같이 변형되는데, 이것에 잡음의 영향까지 더해지면 매우 심각하게 변형된다. 이것이 통신 오류의 원인이 된다.  

### '꼼'은 잡음을 방지하기 위한 방법이다

LAN 케이블로 사용하는 트위스트 페어 케이블(꼰 선쌍)은 두 가닥의 신호선을 한 조로 하여 마주 꼬았다는 데서 붙인 이름으로, 신호선을 마주 꼬아서 잡음을 막을 수 있다.  

잡음이 생기는 원인은 케이블의 주위에서 발생하는 전자파다. 전자파가 금속 등의 도전체에 닿으면 그 안에 전류가 발생한다는 성질 때문에 케이블의 주위에 전자파가 있으면 신호와는 다른 전류가 케이블 안에 흐른다. 신호도 전압에 의해 생기는 일종의 전류이므로 잡음에 의해 생기는 전류와 다르지 않다. 그 결과, 신호와 잡음의 전류가 뒤섞여서 신호의 파형이 변형되는데, 이것이 잡음의 정체이다.  

신호선은 금속으로 만들어져 있고 거기에 전자파가 닿으면 전자파의 진행 방향의 오른쪽으로 전류가 생긴다는 성질이 있다. 이 전류가 파형을 무너뜨리는 요인이 되는데, 신호선은 마주 꼬면 형태가 나선형이 되어 꼰 옆의 선에서 전류가 흐르는 방향이 반대가 된다. 그 결과 잡음에서 생긴 전류가 서로 상쇄되어 잡음에 의한 전류는 약해진다.  

위의 경우는 모터, 형광등, CRT 모니터와 같은 기기에서 누설되는 전자파, 즉 케이블의 밖에서 오는 경우이고 같은 케이블 내에서 인접한 신호선에 의해 누설되는 전자파 또한 잡음의 원인이 있다. 이러한 잡음에 의한 영향을 크로스토크라고 한다. 이 잡음이 강하지는 않지만 거리가 가깝기 때문에 문제가 생긴다. 이를 막기 위해 신호선을 마주 꼬아서 어떤 부분은 플러스 신호가 가까이에 있고, 다른 부분에서는 마이너스 신호와 가깝게 해서 잡음의 영향을 반대로 하여 영향을 줄일 수가 있다. 이 외에도 신호선 사이에 구분판을 넣거나 금속성의 실드라는 피복을 입히는 등의 대책도 있다.  

### 리피터 허브는 연결되어 있는 전체 케이블에 신호를 송신한다

신호가 리피터 허브에 도달하면 LAN 전체에 신호가 흩어진다. 전체에 패킷의 신호를 뿌리고 수신처 MAC 주소에 해당하는 기기만 패킷을 수신한다는 원리를 그대로 실현한 것이 리피터 허브이므로 이더넷의 기본에 따라 신호를 뿌린 것이다. 이후 신호는 모든 커넥터에서 나가면서 리피터 허브에 접속한 전체 기기에 도달한다. 그리고 신호를 수신한 기기는 맨 앞에 있는 MAC 헤더에 쓰여있는 수신처 MAC 주소를 조사하여 자신이 수신처에 해당하면 이것을 수신하고, 해당하지 않으면 수신한 신호를 무시한다. 이렇게 해서 패킷이 수신처 MAC 주소의 상대에게 도달한다.  

리피터 회로의 기본은 신호를 그대로 뿌리는 것이므로 잡음의 영향을 받아 변형되고, 데이터가 변화한 것 같은 신호라도 그대로 흘려버린다. 이 경우 신호가 다음 기기, 즉 스위칭 허브, 라우터, 서버 등에 도달하여 디지털 데이터로 변환되고, FCS를 검사하는 곳에서 데이터 변화가 판명된 후 변화된 패킷은 폐기된다. 그러나 이를 통해 데이터가 없어지는 것은 아니다. 패킷을 폐기하면 수신 확인 응답을 되돌려주지 않으므로 프로토콜 스택의 TCP 담당 부분이 패킷을 다시 보내기 때문이다.  

<br/>

## 스위칭 허브의 패킷 중계 동작

### 스위칭 허브는 주소 테이블로 중계한다

스위칭 허브에도 포트가 있다. 그러나 LAN 어댑터와 다른점은 LAN 어댑터에는 MAC 주소가 할당되어 있어서 수신한 패킷의 수신처 MAC 주소가 자신에게 해당하지 않는 경우에는 패킷을 폐기하지만, 스위칭 허브의 포트는 수신처 MAC 주소를 검사하지 않고 모든 패킷을 수신하여 버퍼 메모리에 저장하기 때문에 스위칭 허브의 포트는 LAN 어댑터와 달리 MAC 주소가 할당되어 있지 않다.  

패킷을 버퍼 메모리에 저장하면 수신처 MAC 주소와 일치하는 것이 MAC 주소표에 등록되어 있는지 조사한다. 해당 주소표에는 기기의 MAC 주소와 그 기기가 어느 포트에 존재하는지에 대한 정보가 등록되어 있다. 이것을 사용하여 수신한 패킷을 어느 포트에서 송신하면 좋을지를 판단한다.  

### MAC 주소 테이블을 등록 및 갱신한다

스위칭 허브는 패킷을 중계할 때 MAC 주소표의 내용을 갱신하는 동작도 실행한다. 그 중 하나는 패킷을 수신했을 때 송신처 MAC 주소를 조사하고, 이것을 수신한 입력 포트 번호와 하나의 세트로 MAC 주소표에 등록하는 것이다. 스위칭 허브는 패킷을 수신할 때마다 이러한 등록 동작을 실행한 후 한 번이라도 패킷을 송신하면 해당 기기의 MAC 주소가 MAC 주소표에 등록된다.  

또 하나의 방법은 오래된 정보는 지우는 것이다. 이는 기기 이동의 경우에 문제가 생길 수 있기 때문에 수행하는 동작이다. 자신의 책상에서 사용하고 있던 노트북 PC를 다른 장소에서 사용하는 경우에 기존의 포트에는 더 이상 노트북이 존재하지 않기 때문에 이 동작을 수행해주게 된다. 주소표에서 지울 때까지의 시간이 몇 분 정도 걸리기 때문에 지워지기 전에 이동한 기기로 갈 패킷이 도착하는 경우도 있다. 이 때에는 통신 동작이 올바르게 이루어지지 않는다. 이 경우에는 스위칭 허브를 리셋하면 주소표가 전부 지워지고 새로 정확한 정보가 등록되면서 다시 정상적으로 작동할 것이다.  

### 예외적인 동작

만약 송신측 기기(PC A)와 수신측 기기(PC B)가 동일한 리피터 허브와 연결되어 있다면 스위칭 허브에서는 송신 포트와 수신 포트가 같은 상황이라고 받아들일 것이다.  
PC A가 보낸 패킷은 리피터 허브에 도착하고, 여기에서 모든 포트에 뿌려져서 스위칭 허브와 PC B에 도착한다. 스위칭 허브에서는 패킷을 리피터 허브에 반송하게 될 것이다. 그러면 PC A, B에 다시 패킷이 도착하게 될 것이다. 이렇게 두개의 같은 패킷이 PC B에 도착하게되면 통신 동작이 제대로 이루어지지 않을 것이기 때문에 스위칭 허브는 송신측과 수신측의 포트가 같을 경우 패킷을 중계하지 않고 폐기한다.  

또 다른 예외적인 동작에는 수신처의 MAC 주소가 주소표에 나와있지 않은 경우다. 이 경우는 주소의 기기에서 패킷이 한 번도 스위칭 허브에 도착하지 않은 경우나 어느 정도 시간이 경과하여 주소표에서 삭제된 경우다. 이 때에는 패킷을 수신한 포트 이외의 전체 포트에서 패킷을 송신한다. 그러면 어느 한 곳에는 반드시 기기가 존재할 것이기 때문에 이 방법을 통해 패킷이 도착한다. 기기가 존재하지 않는 포트에도 송신되지만 이 때문에 문제가 생기지는 않는다. 이더넷은 원래 네트워크 전체에 패킷을 보내고 해당자만이 수신하는 원리가 성립되어있기 때문이다.  

필요 없는 패킷을 보내므로 LAN이 혼잡해지는 것을 걱정할 수도 있지만 한 번 응답이 돌아오면 주소표에 등록되므로 상관없다. 그리고 LAN은 1초에 수천 개 이상의 패킷을 흘려보내는 능력이 있으므로 패킷이 한두 개 증가해도 큰 문제가 되지 않는다.  

### 전이중 모드에서 송신과 수신을 동시에 실행한다

송신과 수신을 동시에 실행할 수 있는 성질도 리피터 허브에는 없는 스위칭 허브의 특징이다. 리피터 허브의 경우에는 여러 대의 컴퓨터가 동시에 송신 동작을 개시하면 신호가 뒤섞여서 파괴된다. 하지만 리피터 허브를 사용하면 이러한 사태가 일어나지 않는다. 트위스트 페어 케이블의 신호선은 송신용과 수신용으로 나뉘어져 있으므로 송수신 도중에 신호가 충돌하지 않는다.  

충돌이 일어나지 않으면 송신과 수신을 동시에 실행해도 상관없다. 그러나 이더넷에 신호가 흐르고 있을 때는 이것이 끝나기를 기다렸다가 송신 동작을 실행하므로 그대로는 송신과 수신을 동시에 실행할 수 없다. 그래서 이더넷의 규칙을 개정하여 신호가 흐르고 있어도 상관하지 않고 송신해도 좋다는 동작 모드를 새로 추가했다. 동시에 이 동작 모드로 동작할 때는 신호의 충돌을 검출하는 회로를 무효화하기로 했는데 이것이 전이중 모드이다.  

전이중 모드는 송신할 때 신호가 흐르고 있어도 이것이 끝나기를 기다릴 필요가 없으므로 그만큼 빠르게 동작한다. 그리고 양방향으로 동시에 송신할 수 있으므로 송신할 수 있는 데이터 양의 상한선도 높아서 성능이 좋다.  

### 최적의 전송 속도로 보내는 자동 조정

접속한 상대가 전이중 모드를 지원하는지 검출하고 동작 모드를 자동으로 전환하는 기능이 나왔다. 동작 모드뿐만 아니라 상대의 전송 속도를 검출하여 전송 속도도 자동으로 전환하는데, 이 기능을 자동 조정이라고 한다.  

### 스위칭 허브는 복수의 중계 동작을 동시에 실행한다

스위칭 허브는 수신처 MAC 주소의 기기가 존재하는 포트 이외에는 송신 동작을 실행하지 않으므로 다른 포트는 빈 상태가 된다. 따라서 여기에서 별도의 패킷을 흘릴 수 있으며, 이렇게 해서 동시에 여러 개의 패킷을 중계할 수 있다.  

<br/>

## 라우터의 패킷 중계 동작

### 라우터의 기본

리피터 허브나 스위칭 허브를 경유한 패킷은 라우터에 도착하게되고, 라우터에서 다음 라우터로 중계될 것이다. 라우터는 중계 부분과 포트 부분이라는 두 부분으로 구성되어있다. 중계 부분은 패킷의 중계 대상을 판단하는 동작을 담당하고, 포트 부분이 패킷을 송수신하는 동작을 담당한다. 중계 부분은 IP 담당 부분과 같고, 포트 부분은 LAN 어댑터와 같다고 생각하면 된다.  

중계 부분에서 받은 패킷의 IP 패킷에 기록되어 있는 수신처 IP 주소와 중계 대상을 등록한 표를 대조하여 중계 대상을 판단한다. 그리고 중계 대상측의 포트로 패킷을 옮기고 포트 부분의 하드웨어 규칙에 따라 패킷 송신 동작을 실행한다.  

스위칭 허브는 들어온 패킷을 전송하기만 하고 자신이 송신처나 수신처가 되지 않는 반면에, 라우터의 포트에는 MAC주소가 할당되어 이더넷의 송신처나 수신처가 된다. 포트에는 IP 주소도 할당되므로 이런 의미에서도 컴퓨터의 LAN 어댑터와 같다.  

### 경로표에 등록된 정보

스위칭 허브는 MAC 헤더에 기록되어 있는 수신처 MAC 주소로 중계 대상을 판단하지만, 라우터는 IP 헤더에 기재되어 있는 수신처 IP 주소로 중계 대상을 판단한다. 라우터의 테이블은 라우팅 테이블 또는 경로표라고 부른다.  

수신처, 넷마스크, 게이트웨이, 인터페이스 그리고 메트릭과 같은 항목이 포함되어있다. 라우터는 호스트 번호를 무시하고 네트워크 번호 부분만 조사한다.  
라우터가 경로표에 경로 정보를 등록하거나 갱신하는 동작은 패킷을 중계하는 동작과 분리되어 있다. 즉 패킷을 중계할 때 경로표의 내용에 손대지 않는다. 라우터의 경로표에 경로 정보를 등록하는 방법은 다음과 같다.  

1. 사람이 수동으로 경로 정보를 등록 / 갱신
2. 라우팅 프로토콜이라는 구조를 사용하여 라우터들끼리 경로 정보를 교환하고 라우터가 자체에서 경로표에 등록

2에 속하는 프로토콜은 한 가지가 아니라 RIP, OSPF, BGP 라는 라우팅 프로토콜처럼 복수의 프로토콜이 존재한다.  

### 라우터의 패킷 수신 동작

LAN 어댑터와 거의 같게 동작한다. 본인의 MAC 주소가 아닌 패킷이 도착한 경우에는 해당 패킷을 폐기하고 그렇지 않다면 패킷을 수신 버퍼 메모리에 저장한다.  

### 경로표에 검색하여 출력 포트를 발견한다

라우터는 패킷 수신 동작이 끝나면 맨 앞의 MAC 헤더를 폐기한다. 수신처 MAC 주소가 본인 자신이기 때문이다. MAC 헤더의 뒤에 있는 IP 헤더의 내용을 보고 패킷 중계 동작에 들어간다. 가장 먼저 수신한 패킷의 수신처 IP 주소와 경로표의 수신처 항목을 조사하여 해당하는 행을 찾는다. 이렇게 해서 해당하는 것을 찾으면 복수의 후보가 발견될 수도 있다. 그렇다면 네트워크 번호의 비트 수가 가장 긴 것을 찾는다. 네트워크 번호의 비트 수가 길면 호스트 번호의 비트 수가 짧아지기 때문에 그만큼 할당 가능한 번호의 수가 적어 서브넷에 접속 가능한 대수가 적어져 범위를 축소할 수 있기 때문이다.  

만약 해당하는 행이 한 개도 발견되지 않은 경우에는 라우터는 해당패킷을 폐끼하고 ICMP(Internet Control Message Protocol, 패킷을 운반할 때 발생하는 오류를 통지하거나 제어용 메세지를 보낼 때 이용) 메세지로 송신처에 이 사실을 통지한다. 스위칭 허브와는 달리 라우터는 네트워크의 규모를 헤아릴 수 없을 정도로 크기 때문에 모든 기기에 패킷을 보내기에는 네트워크가 혼잡해진다. 그러므로 라우터는 중계 대상이 분명하지 않은 패킷을 폐기하는 것이다.  

### 해당하는 경로가 없는 경우에 선택하는 기본 경로

넷마스크 항목을 0.0.0.0으로 하면 모든 주소가 일치하기 때문에 중계 대상이 분명하지 않다는 사태가 발생하지 않는다. 게이트웨이 항목에 인터넷으로 나가는 라우터를 등록해 두면 다른 행에 해당하는 것이 없는 경우에는 패킷을 그곳으로 중계한다. 이 행을 기본 경로라고 하며, 여기에 등록한 라우터를 기본 게이트웨이라고 한다. 이렇게 해서 수신처 항목에 서브넷을 나타내는 IP 주소와 개별 컴퓨터를 나타내는 IP 주소가 뒤섞였어도 같은 방법으로 중계 대상을 검색할 수 있다. 그리고 중계 대상이 분명하지 않은 사태도 방지할 수 있다.  

### 패킷은 유효 기한이 있다

IP 헤더의 필드에는 TTL(Time To Live) 라는 것이 있는데 라우터를 경유할 때마다 이 값을 1씩 줄이다가 0이 되면 패킷을 폐기한다. 이것은 패킷이 같은 장소를 순환하는 사태를 막기 위한 것이다. 보통 64 또는 128로 값을 설정한다. 지구의 반대편까지 엑세스해도 경유하는 라우터 수가 많아야 수십 개 정도이기 때문이다.  

### 큰 패킷은 조각 나누기 기능으로 분할한다

라우터의 포트 부분은 이더넷뿐만 아니라 이더넷 이외의 LAN이나 통신 회선의 경우도 있다. 이때 패킷 최대 길이 초과로 인해 패킷을 분할하는 경우가 생긴다. 이 경우에 IP 프로토콜에 규정된 조각 나누기(fragmentation)라는 방법을 사용하여 패킷을 분할하고, 패킷의 길이를 짧게 만든 후 중계한다.  

출력측의 MTU(한 개의 패킷으로 운반할 수 있는 데이터의 최대 길이)를 조사하여 중계하는 패킷을 그대로 출력측에서 송신할 수 있는지 조사한다. 만약 출력측의 MTU가 작다면 패킷을 분할하게된다. 그 전에 IP 헤더의 플래그 필드를 조사하여 분할해도 좋을지 확인한다. 플래그 필드가 분할 불가로 되어 있으면 분할할 수 없으므로 패킷을 폐기하고 ICMP 메세지로 송신처에 통지한다. 만약 분할가능하다면 TCP 헤더 이후의 부분을 분할 대상 데이터로 간주한다. TCP 헤더는 사용자 데이터가 아니지만 IP 입장에서 보면 TCP에서 송신을 의뢰받은 부분이므로 데이터가 된다. 분할 후에는 여기에 IP 헤더를 덧붙인다. 이때 일부 IP 헤더의 필드를 수정하는데 그 이유는 조각 나누기로 분할한 핵심 정보를 기록하기 위해서이다.  

### 라우터의 송신 동작은 컴퓨터와 같다

MAC 헤더의 맨 앞에 있는 수신처 MAC 주소 필드에 값을 설정하기 위해 경로표의 게이트웨이 항목에서 패킷을 건네줄 상대를 판단한다. 게이트웨이 항목에 IP 주소가 쓰여있으면 이 IP 주소가 건네줄 상대이고, 이곳이 비어있으면 IP 헤더의 수신처 IP 주소가 건네줄 상대가 된다. 이를 통해 상대의 IP 주소가 결정되면 ARP로 IP 주소에서 MAC 주소를 조사하고, 결과를 수신처 MAC 주소로 설정한다. 라우터에도 ARP 캐시가 있으므로 먼저 ARP 캐시를 찾아보고, 해당하는 것이 없으면 ARP로 조회를 보내 MAC 주소를 조회한다. 송신처 MAC 주소 필드는 출력측의 포트에 할당된 MAC 주소를 설정한다.  

이렇게 송신된 패킷은 다음 라우터에 도달하고 다시 또 다음의 라우터에 도착하는 동작을 반복하다가 최종적으로 목적지에 도착하게된다.  

### 라우터와 스위칭 허브의 관계

통신 상대까지 패킷을 전달하는 전체의 동작은 IP(라우터)가 담당하고, 이 동작을 할때 다음 라우터까지 패킷을 운반하는 부분은 이더넷(스위칭 허브)이 담당한다.  

<br/>

## 라우터의 부가 기능

### 주소 변환으로 IP 주소를 효율적으로 이용한다

라우터는 기본 동작과 더불어 주소 변환과 패킷 필터링이라는 중요한 기능을 가지고 있다. 모든 PC에서 IP 주소를 가지게 되면 결국 IP 주소가 고갈이 될 것이다. 회사 A와 B가 독립된 사내 네트워크를 구축했다고 하자. 이 경우 서로의 패킷이 왕래할 일이 없으므로 동일한 주소를 가져도 문제될 것이 없을 것이다. 주소 부족에 대처하기 위해 이 성질을 이용했다. 즉 사내의 기기에 할당하는 주소는 다른 회사와 중복되어도 좋다고 한 것이다. 단 아무리 사내라고 해도 모두 자기 편한대로 주소를 할당하면 문제가 일어날 수 있으므로 특정 주소를 사내용으로 사용한다는 규칙을 세웠다. 이러한 규칙에 기초한 사내용 주소는 프라이비트 주소, 이전의 고유한 주소는 글로벌 주소라고 부른다.  

프라이비트 주소로 사내에서 사용하는 것은 아래의 범위로 한정된다.  
10.0.0.0 ~ 10.255.255.255    172.16.0.0 ~ 172.31.255.255     192.168.0.0 ~ 192.168.255.255  

이 범위는 프라이비트 주소의 규칙을 만드는 시점에서 어디에도 할당하지 않았던 미사용의 글로벌 주소 중에서 선택한 것이다. 이 범위는 다른 회사와 중복해도 좋으므로 일원화하여 관리하지 않는다. 그러나 사내 네트워크는 완전히 독립되어 있는 것이 아니라 인터넷을 통해 많은 회사에 연결되므로 패킷이 사내와 인터넷을 왕래하면 여기저기에 같은 주소가 있게 되어 패킷을 정확하게 운반할 수 없게 된다. 따라서 인터넷에 공개하는 서버와 사내의 네트워크를 분리한다. 사내 네트워크에는 프라이비트 주소를 할당하고 인터넷과는 직접 패킷을 주고받지 않도록 하는 구조를 가지는데 이 구조가 주소 변환이다.(공개된 서버와 사내 서버 중간의 라우터에 주소 변환의 구조를 넣는다)  

### 주소 변환의 기본 동작

주소 변환의 구조는 패킷을 중계할 때 IP 헤더에 기재된 IP 주소와 포트 번호를 바꿔쓰는 것이다. TCP의 접속 동작에서 최초로 흐르는 패킷을 인터넷에 중계할 때 송신처의 IP 주소를 프라이비트 주소에서 주소 변환 장치의 인터넷측에 있는 포트에 할당된 글로벌 주소로 바꿔쓴다. 포트 번호도 바꾸어 쓴다. 바꿔쓴 후의 글로벌 주소와 포트 번호를 한 세트로 하여 주소 변환 장치 내부에 있는 대응표에 기록해 둔다.  

회신 패킷 또한 수신처는 바꿔쓴 글로벌 주소와 포트 번호로 되어있을 것이다. 주소 변환 장치에서 주소의 대응표에서 글로벌 주소와 포트 번호를 찾아서 수신처를 대응하는 프라이비트 주소와 포트 번호로 바꿔씀으로써 송신처에 응답 패킷이 도착하게 된다.  

### 포트 번호를 바꿔쓰는 이유

포트 번호를 1개만 쓰게 된다면 프라이비트 주소와 글로벌 주소가 1대1로 대응해서 인터넷에 접속하는 대수만큼 글로벌 주소가 필요하기 때문이다. 포트 번호를 여러개 씀으로써 글로벌 주소의 이용 효율이 높아진다.  

### 인터넷에서 회사로 액세스한다

사내에서 인터넷으로 액세스하는 패킷을 중계할 때는 대응표에 송신처의 프라이비트 주소와 포트 번호가 등록되어 있지 않아도 패킷을 중계할 수가 있다. 글로벌 주소는 라우터에 할당되어 있고, 포트 번호는 적당히 비어있는 것을 사용하면 되기 때문이다. 그러나 반대로 인터넷에서 사내로 액세스 하기 위해서는 대응표에 기록이 되어있지 않으면 중계할 수가 없다. 액세스 중인 기기가 아닌 이상 중계될 수 없기 때문에 부정 침입을 방지하는 효과를 가지고 있다.  

### 라우터의 패킷 필터링 기능

패킷을 중계할 때 MAC 헤더, IP 헤더, TCP 헤더에 기록되어 있는 내용을 조사하여 그것이 사전에 설정한 조건에 합치되면 패킷을 중계하거나 폐기하는 동작을 실행하는 것이 패킷 필터링 기능이다. 대부분의 방화벽이라는 기기나 소프트웨어는 이 원리를 이용하여 부정 침입을 방지한다.  

***