# 2. 테스트

* 테스트란 내가 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인해서, 만든 코드를 확신할 수 있게 해주는 작업이다.
* 한꺼번에 너무 많은 것을 몰아서 테스트하면 테스트 수행 과정도 복잡해지고, 오류가 발생했을 때 정확한 원인을 찾기가 힘들어진다. 따라서 테스트는 가능하면 작은 단위로 쪼개서 집중해서 할 수 있어야 한다.충분히 하나의 관심에 집중해서 효율적으로 테스트할 만한 범위면 단위라고 볼 수 있다.
* 자동으로 수행되는 테스트의 장점은 자주 반복할 수 있따는 것이다. 테스트를 수정 후 빠르게 전체 테스트를 수행해서 수정 때문에 다른 기능에 문제가 발생하지는 않는지 재빨리 확인하고, 성공한다면 마음에 확신을 얻을 수 있다.
* JUnit 프레임워크가 요구하는 조건 두 가지는 메소드가 public으로 선언돼야 하는 것이고, 다른 하나는 메소드에 ``@Test``라는 어노테이션을 붙여주는 것이다.
* 만들고자 하는 기능의 내용을 담고 있으면서 만들어진 코드를 검증도 해줄 수 있도록 테스트 코드를 먼저 만들고, 테스트를 성공하게 해주는 코드를 작성하는 방식의 개발 방법을 테스트 주도 개발이라고 한다. 
* TDD는 코드를 만들어 테스트를 실행하는 그 사이의 간격이 매우 짧다는 장점이 있다. 
* 공통적인 코드에 대한 내용은 ``@BeforeEach``, ``@AfterEach``, ``@BeforeAll``, ``@AfterAll``을 통해 최적화할 수 있다. 각 테스트가 서로 영향을 주지 않고 독립적으로 실행됨을 확실히 보장해주기 위해서 사용되기도 한다.
* JUnit 확장기능은 테스트가 실행되기 전에 딱 한 번만 애플리케이션 컨텍스트를 만들어두고, 테스트 오브젝트가 만들어질 때마다 특별한 방법을 이용해 애플리케이션 컨텍스트 자신을 테스트 오브젝트의 특정 필드에 주입해주는 것이다. 여러 개의 테스트 클래스가 있는 경우에도 모두 같은 설정파일을 가진 애플리케이션 컨텍스트를 사용한다면, 두 테스트 클래스의 모든 메소드가 하나의 애플리케이션 컨텍스트를 공유하게 되어 테스트 성능이 대폭 향상될 수 있다.
* ``@Autowired``를 이용하면 변수에 할당 가능한 타입을 가진 빈을 자동으로 찾는다. 타입으로 먼저 찾고 이후에는 변수 명으로 찾게 된다. 주입받을 때에는 인터페이스 타입으로 주입받는 것이 차후에 새로운 클래스가 추가되거나 하는 경우에 테스트하기 용이하다.
* ``@DirtiesContext``를 사용하면 컨텍스트를 공유하지 않고 새로운 어플리케이션 컨텍스트가 만들어지게끔 할 수 있다.
* DI를 위해 컨텍스트를 사용하지말고 직접 오브젝트를 만들어서 DI를 사용해주는 방법도 있다. 매번 새로운 오브젝트가 만들어진다는 단점이 있지만 테스트시간을 절약할 수 있다.
* 다른 개발팀에서 만들어서 제공한 라이브러리 등에 대해서 사용 방법을 익히기 위한 테스트를 학습 테스트라고 한다.
* 학습 테스트의 장점
  * 다양한 조건에 따른 기능을 손쉽게 확인해볼 수 있다
  * 학습 테스트 코드를 개발 중에 참고할 수 있다
  * 프레임워크나 제품을 업그레이드할 때 호환성 검증을 도와준다
  * 테스트 작성에 대한 좋은 훈련이 된다
  * 새로운 기술을 공부하는 과정이 즐거워진다
* 버그 테스트란 코드에 오류가 있을 때 그 오류를 가장 잘 드러내줄 수 있는 테스트를 말한다. 일단 실패하도록 만들어야 한다. 버그 테스트는 테스트의 완성도를 높여준다. 버그의 내용을 명확하게 분석하게 해주고, 기술적인 문제를 해결하는 데 도움이 된다.

***

